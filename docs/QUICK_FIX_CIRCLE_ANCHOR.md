# 圆形锚点快速修复指南

## 问题
圆形选择后还是显示8个锚点，并且锚点没有hover效果。

## 立即执行的步骤

### 1. 清除所有缓存

```bash
# 清除 Vite 缓存
rm -rf node_modules/.vite

# 清除浏览器缓存
# Chrome/Edge: Ctrl+Shift+Delete (Windows) 或 Cmd+Shift+Delete (Mac)
# 选择"缓存的图片和文件"，点击"清除数据"
```

### 2. 重启开发服务器

```bash
# 停止当前服务器 (Ctrl+C)
# 重新启动
npm run dev
```

### 3. 强制刷新浏览器

- **Mac**: `Cmd + Shift + R`
- **Windows**: `Ctrl + F5`

### 4. 检查浏览器控制台

打开浏览器开发者工具（F12），查看控制台日志。

**关键日志信息：**

1. **如果看到：**
   ```
   SelectTool: 生成锚点 - action.type="circle", action.id="xxx"
   ✅ CircleAnchorHandler: 生成了 5 个锚点 (4 个边界锚点 + 1 个中心点)
   ```
   说明代码正常工作，但可能浏览器缓存了旧代码。

2. **如果看到：**
   ```
   SelectTool: 生成锚点 - action.type="xxx", action.id="xxx"
   ❌ SelectTool: 未找到图形类型 "xxx" 的处理器，使用默认8个锚点
   ```
   说明 `action.type` 不是 `'circle'`，需要检查绘制工具。

### 5. 验证操作步骤

1. **使用圆形工具绘制**：确保使用圆形工具（⭕），不是其他工具
2. **切换到选择工具**：点击选择工具按钮（🎯）
3. **只选择一个圆形**：点击圆形选中它（不要多选）
4. **查看锚点**：应该看到4个圆形边界锚点 + 1个圆形中心点

### 6. 如果还是8个锚点

**可能的原因：**

1. **选择了多个图形**：多选场景会使用8个锚点
   - 解决：只选择一个圆形

2. **action.type 不是 'circle'**：绘制工具没有正确设置类型
   - 解决：检查控制台日志，确认 action.type 的值
   - 如果 action.type 不是 'circle'，需要检查 CircleTool 是否正确设置

3. **浏览器缓存**：浏览器缓存了旧代码
   - 解决：清除浏览器缓存并强制刷新

4. **代码没有重新编译**：Vite 没有重新编译
   - 解决：重启开发服务器

### 7. 检查 hover 效果

如果锚点没有 hover 效果，检查控制台是否有以下日志：

```
Hover状态变化: null -> 索引0
绘制锚点: 4 个边界锚点, hoverAnchorInfo={"index":0,"isCenter":false}
```

如果没有这些日志，说明 hover 状态没有正确更新。

## 调试命令

在浏览器控制台执行：

```javascript
// 检查 SelectTool 实例
// 需要先选中一个圆形，然后执行：

// 方法1：通过调试按钮
// 点击页面上的"🔍 调试选择"按钮

// 方法2：直接检查（如果 DrawBoard 暴露了实例）
// 在 SelectionDemo 页面，可能需要通过 React DevTools 访问
```

## 预期结果

修复后应该看到：

1. **4个圆形边界锚点**（上、下、左、右）
2. **1个圆形中心点**
3. **鼠标悬停时**：锚点放大至10px，边框加粗至3px
4. **拖拽时**：锚点放大至12px，边界锚点变为橙色，中心点变为绿色

## 如果问题仍然存在

请提供以下信息：

1. 浏览器控制台的完整日志（特别是关于锚点生成的日志）
2. action.type 的值（从控制台日志中获取）
3. 是否选择了多个图形
4. 浏览器版本和操作系统信息

