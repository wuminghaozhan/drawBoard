# DrawBoard æ•´ä½“æ¶æ„å›¾

## ç³»ç»Ÿåˆ†å±‚æ¶æ„

è¿™ä¸ªå›¾è¡¨å±•ç¤ºäº† DrawBoard çš„äº”å±‚æ¶æ„è®¾è®¡ï¼Œä»ç”¨æˆ·ç•Œé¢åˆ°åº•å±‚æ¸²æŸ“å¼•æ“çš„å®Œæ•´æŠ€æœ¯æ ˆã€‚

```mermaid
graph TB
    subgraph "ç”¨æˆ·ç•Œé¢å±‚ (UI Layer)"
        UI1[React ç»„ä»¶]
        UI2[å·¥å…·é¢æ¿]
        UI3[æ§åˆ¶ç•Œé¢]
        UI4[æ¼”ç¤ºé¡µé¢]
    end
    
    subgraph "åº”ç”¨å±‚ (Application Layer)"
        APP1[DrawBoard ä¸»ç±»]
        APP2[API æ¥å£]
        APP3[å·¥å‚å‡½æ•°]
    end
    
    subgraph "ä¸šåŠ¡é€»è¾‘å±‚ (Business Layer)"
        BL1[DrawingHandler<br/>ç»˜åˆ¶å¤„ç†å™¨]
        BL2[StateHandler<br/>çŠ¶æ€å¤„ç†å™¨]
        BL3[CursorHandler<br/>å…‰æ ‡å¤„ç†å™¨]
    end
    
    subgraph "æ ¸å¿ƒæœåŠ¡å±‚ (Core Services)"
        CS1[ToolManager<br/>å·¥å…·ç®¡ç†]
        CS2[EventManager<br/>äº‹ä»¶ç®¡ç†]
        CS3[HistoryManager<br/>å†å²ç®¡ç†]
        CS4[PerformanceManager<br/>æ€§èƒ½ç®¡ç†]
        CS5[SelectionManager<br/>é€‰æ‹©ç®¡ç†]
        CS6[LayerManager<br/>å›¾å±‚ç®¡ç†]
    end
    
    subgraph "æ¸²æŸ“å¼•æ“å±‚ (Rendering Engine)"
        RE1[CanvasEngine<br/>å¤šå±‚Canvaså¼•æ“]
        RE2[äº¤äº’å±‚ z-index:2]
        RE3[ç»˜åˆ¶å±‚ z-index:1]
        RE4[èƒŒæ™¯å±‚ z-index:0]
    end
    
    UI1 --> APP1
    UI2 --> APP1
    UI3 --> APP1
    UI4 --> APP1
    
    APP1 --> BL1
    APP1 --> BL2
    APP1 --> BL3
    
    BL1 --> CS1
    BL1 --> CS3
    BL1 --> CS4
    BL2 --> CS5
    BL2 --> CS6
    BL3 --> CS2
    
    CS1 --> RE1
    CS2 --> RE1
    CS3 --> RE1
    CS4 --> RE1
    CS5 --> RE1
    CS6 --> RE1
    
    RE1 --> RE2
    RE1 --> RE3
    RE1 --> RE4
    
    style APP1 fill:#e1f5fe
    style BL1 fill:#f3e5f5
    style BL2 fill:#f3e5f5
    style BL3 fill:#f3e5f5
    style RE1 fill:#e8f5e8
```

## æ¶æ„ç‰¹ç‚¹

### ğŸ¯ åˆ†å±‚èŒè´£
- **ç”¨æˆ·ç•Œé¢å±‚**: React ç»„ä»¶å’Œç”¨æˆ·äº¤äº’ç•Œé¢
- **åº”ç”¨å±‚**: DrawBoard ä¸»ç±»ä½œä¸ºç³»ç»Ÿé—¨é¢
- **ä¸šåŠ¡é€»è¾‘å±‚**: å¤„ç†å™¨æ¨¡å¼ï¼ŒèŒè´£åˆ†ç¦»
- **æ ¸å¿ƒæœåŠ¡å±‚**: å„ç§ä¸“ä¸šç®¡ç†å™¨
- **æ¸²æŸ“å¼•æ“å±‚**: å¤šå±‚ Canvas æ¸²æŸ“ç³»ç»Ÿ

### âš¡ è®¾è®¡ä¼˜åŠ¿
- **å•å‘æ•°æ®æµ**: ä»ä¸Šåˆ°ä¸‹çš„æ¸…æ™°ä¾èµ–å…³ç³»
- **èŒè´£åˆ†ç¦»**: æ¯å±‚ä¸“æ³¨ç‰¹å®šåŠŸèƒ½
- **æ¨¡å—åŒ–**: ä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **é«˜å†…èšä½è€¦åˆ**: å‡å°‘æ¨¡å—é—´ä¾èµ– 