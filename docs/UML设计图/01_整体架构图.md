# DrawBoard æ•´ä½“æ¶æ„å›¾

## ç³»ç»Ÿåˆ†å±‚æ¶æ„

è¿™ä¸ªå›¾è¡¨å±•ç¤ºäº† DrawBoard çš„äº”å±‚æ¶æ„è®¾è®¡ï¼Œä»ç”¨æˆ·ç•Œé¢åˆ°åº•å±‚æ¸²æŸ“å¼•æ“çš„å®Œæ•´æŠ€æœ¯æ ˆã€‚

```mermaid
graph TB
    subgraph "ç”¨æˆ·ç•Œé¢å±‚ (UI Layer)"
        UI1[React ç»„ä»¶]
        UI2[å·¥å…·é¢æ¿]
        UI3[æ§åˆ¶ç•Œé¢]
        UI4[æ¼”ç¤ºé¡µé¢]
        UI5[é”™è¯¯å¤„ç†æ¼”ç¤º]
    end
    
    subgraph "åº”ç”¨å±‚ (Application Layer)"
        APP1[DrawBoard ä¸»ç±»<br/>1056è¡Œ]
        APP2[API æ¥å£]
        APP3[å·¥å‚å‡½æ•°]
        APP4[å•ä¾‹ç®¡ç†]
    end
    
    subgraph "ä¸šåŠ¡é€»è¾‘å±‚ (Business Layer)"
        BL1[DrawingHandler<br/>ç»˜åˆ¶å¤„ç†å™¨]
        BL2[StateHandler<br/>çŠ¶æ€å¤„ç†å™¨]
        BL3[CursorHandler<br/>å…‰æ ‡å¤„ç†å™¨]
    end
    
    subgraph "æ ¸å¿ƒæœåŠ¡å±‚ (Core Services)"
        CS1[ToolManager<br/>å·¥å…·ç®¡ç†]
        CS2[EventManager<br/>äº‹ä»¶ç®¡ç†]
        CS3[HistoryManager<br/>å†å²ç®¡ç†]
        CS4[PerformanceManager<br/>æ€§èƒ½ç®¡ç†]
        CS5[SelectionManager<br/>é€‰æ‹©ç®¡ç†]
        CS6[VirtualLayerManager<br/>è™šæ‹Ÿå›¾å±‚ç®¡ç†]
        CS7[ComplexityManager<br/>å¤æ‚åº¦ç®¡ç†]
        CS8[ShortcutManager<br/>å¿«æ·é”®ç®¡ç†]
        CS9[ExportManager<br/>å¯¼å‡ºç®¡ç†]
        CS10[ErrorHandler<br/>é”™è¯¯å¤„ç†]
        CS11[LightweightResourceManager<br/>èµ„æºç®¡ç†]
    end
    
    subgraph "æ¸²æŸ“å¼•æ“å±‚ (Rendering Engine)"
        RE1[CanvasEngine<br/>å¤šå±‚Canvaså¼•æ“]
        RE2[äº¤äº’å±‚ z-index:2]
        RE3[ç»˜åˆ¶å±‚ z-index:1]
        RE4[èƒŒæ™¯å±‚ z-index:0]
    end
    
    UI1 --> APP1
    UI2 --> APP1
    UI3 --> APP1
    UI4 --> APP1
    UI5 --> APP1
    
    APP1 --> BL1
    APP1 --> BL2
    APP1 --> BL3
    
    BL1 --> CS1
    BL1 --> CS3
    BL1 --> CS4
    BL1 --> CS6
    BL2 --> CS5
    BL2 --> CS7
    BL3 --> CS2
    
    CS1 --> RE1
    CS2 --> RE1
    CS3 --> RE1
    CS4 --> RE1
    CS5 --> RE1
    CS6 --> RE1
    CS7 --> RE1
    CS8 --> RE1
    CS9 --> RE1
    CS10 --> RE1
    CS11 --> RE1
    
    RE1 --> RE2
    RE1 --> RE3
    RE1 --> RE4
    
    style APP1 fill:#e1f5fe
    style BL1 fill:#f3e5f5
    style BL2 fill:#f3e5f5
    style BL3 fill:#f3e5f5
    style RE1 fill:#e8f5e8
    style CS10 fill:#fff3e0
    style CS11 fill:#fff3e0
```

## æ¶æ„ç‰¹ç‚¹

### ğŸ¯ åˆ†å±‚èŒè´£
- **ç”¨æˆ·ç•Œé¢å±‚**: React ç»„ä»¶å’Œç”¨æˆ·äº¤äº’ç•Œé¢
- **åº”ç”¨å±‚**: DrawBoard ä¸»ç±»ä½œä¸ºç³»ç»Ÿé—¨é¢ï¼Œå•ä¾‹ç®¡ç†
- **ä¸šåŠ¡é€»è¾‘å±‚**: å¤„ç†å™¨æ¨¡å¼ï¼ŒèŒè´£åˆ†ç¦»
- **æ ¸å¿ƒæœåŠ¡å±‚**: 10ä¸ªä¸“ä¸šç®¡ç†å™¨ï¼ŒåŠŸèƒ½å®Œæ•´
- **æ¸²æŸ“å¼•æ“å±‚**: å¤šå±‚Canvasç³»ç»Ÿï¼Œæ€§èƒ½ä¼˜åŒ–

### ğŸ—ï¸ æ ¸å¿ƒç»„ä»¶ç»Ÿè®¡
- **æ€»æ–‡ä»¶æ•°**: 43ä¸ªTypeScriptæ–‡ä»¶
- **æ€»ä»£ç è¡Œæ•°**: 11,431è¡Œ
- **æ ¸å¿ƒç±»**: 1ä¸ªä¸»ç±» + 3ä¸ªå¤„ç†å™¨ + 10ä¸ªç®¡ç†å™¨
- **å·¥å…·ç³»ç»Ÿ**: å®Œæ•´çš„ç»˜åˆ¶å·¥å…·é“¾
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œèµ„æºç®¡ç†

### âš¡ æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§
- **å¤šå±‚Canvas**: åˆ†ç¦»äº¤äº’ã€ç»˜åˆ¶ã€èƒŒæ™¯å±‚
- **é¢„æ¸²æŸ“ç¼“å­˜**: æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ
- **å†…å­˜ç®¡ç†**: è½»é‡çº§èµ„æºç®¡ç†å™¨
- **å¤æ‚åº¦ç®¡ç†**: è‡ªé€‚åº”æ€§èƒ½æ¨¡å¼
- **äº‹ä»¶èŠ‚æµ**: ä¼˜åŒ–ç”¨æˆ·äº¤äº’æ€§èƒ½

### ğŸ›¡ï¸ ç¨³å®šæ€§ä¿éšœ
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ç³»ç»Ÿ
- **èµ„æºç®¡ç†**: è‡ªåŠ¨èµ„æºæ¸…ç†å’Œæ³„æ¼æ£€æµ‹
- **å•ä¾‹ç®¡ç†**: é˜²æ­¢é‡å¤å®ä¾‹åŒ–
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰ 